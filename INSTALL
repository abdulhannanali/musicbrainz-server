Install instructions for the MusicBrainz Server: 
------------------------------------------------

Requirements:
=============

The MusicBrainz server requires the following items:

1) An SQL server. The code has been tested with MySQL. The scripts use the
   perl DBI interface to talk to the server. It should work with other
   servers as well, but that has not been tested.
2) A database and user dedicated to musicbrainz. These scripts use
   the database name 'musicbrainz' and user name 'musicbrainz'.
3) Apache with mod_perl and Mason installed. See the following sites for more
   details on each of these packages:
   
      Apache:   http://www.apache.org 
      mod_perl: http://perl.apache.org for details.
      Mason:    http://www.masonhq.com

4) Perl 5.003 or higher and the required perl modules: 
  
   CPAN Name         Actual Perl module distributions
   --------------------------------------------------
   DBI             http://www.perl.com/CPAN/authors/id/TIMB/DBI-1.14.tar.gz
   DBD::mysql      http://www.perl.com/CPAN/authors/id/JWIED/Msql-Mysql-modules-1.2215.tar.gz
   CGI             http://www.perl.com/CPAN/authors/id/LDS/CGI.pm-2.73.tar.gz
   HTML::Mason     http://www.perl.com/CPAN/authors/id/J/JS/JSWARTZ/HTML-Mason-0.88.tar.gz
   LWP             http://www.perl.com/CPAN/authors/id/GAAS/libwww-perl-5.48.tar.gz
   Apache::Session http://www.perl.com/CPAN/authors/id/JBAKER/Apache-Session-1.53.tar.gz
   MLDBM           http://www.perl.com/CPAN/authors/id/GSAR/MLDBM-2.00.tar.gz
   Digest::MD5     http://www.perl.com/CPAN/authors/id/GAAS/Digest-MD5-2.12.tar.gz
   HTML::Parser    http://www.perl.com/CPAN/authors/id/GAAS/HTML-Parser-3.13.tar.gz
   MIME::Base64    http://www.perl.com/CPAN/authors/id/GAAS/MIME-Base64-2.11.tar.gz
   XML::Parser     http://www.perl.com/CPAN/authors/id/C/CO/COOPERCL/XML-Parser-2.29.tar.gz
   XML::DOM        http://www.perl.com/CPAN/authors/id/E/EN/ENNO/XML-DOM-1.25.tar.gz
   XML::XQL        http://www.perl.com/CPAN/authors/id/E/EN/ENNO/XML-XQL-0.61.tar.gz

Installation:
=============

1) Make sure you have all the prerequisite pieces of software installed.
   Installing perl modules using CPAN is easier than doing it by hand.
   To use CPAN, as root type 'perl -MCPAN -e shell'. 

   For the HTML::Mason install, there is a handler.pl script already
   included in the admin directory. You will probably need to review
   it and make sure that all the paths point to the right place.

2) Create a database called 'musicbrainz'. 
   (mysql: 'mysqladmin create musicbrainz')

3) Add a user to the database called musicbrainz. The user needs to have
   insert, select, and update priveledges. An easy way to do this is
   to use the MySQLAddUser.pl script in the admin directory.
   (cd admin ; MySQLAddUser.pl musicbrainz localhost)

4) In the cgi-bin directory, edit DBDefs.pm. This perl module will keep
   all the information for accesing the database. Follow the instructions
   in the module.

5) In the admin directory, run the script CreateTables.pl. This will log
   into the DB server and create all the necessary tables. Give it the
   -t and the -i option to create the tables and indices needed to run
   MusicBrainz.

6) Configure apache to use mason. In the admin directory you will find
   a prefab handler.pl to use with the mason setup and the vh_httpd.conf
   file which is a VirtualHost fragment for Apache's httpd.conf file.
   I suggest to run MusicBrainz as a virtual host, and if you stash
   the htdocs files into /home/httpd/musicbrains/htdocs and the files
   from cgi-bin into /home/httpd/musicbrainz/cgi-bin you shouldn't have
   to modify handler.pl and you should only have to import vh_httpd.conf
   into your virtualhosts section of your httpd.conf file. In the admin
   directory you'll also find startup.pl with is the mod_perl startup
   file. Place both startup.pl and handler.pl into the conf directory
   of your apache install. These scripts assume that apache got installed
   into /usr/apache. Its probably wise to review each of these scripts
   and look for TODO comments. Each of the TODO comments indicates a
   path or setting that needs to be set for your configuration. 

7) Copy the all the files/subdirs in the htdocs directory into DocumentRoot
   directory that you specified in httpd.conf. Then copy all the files/subdirs
   from the cgi-bin dir into the ScriptAlias directory specified in httpd.conf

8) Now start mysql (if its not already running), and then start apache and
   you should be set and ready to roll.

Good luck!

Robert Kaye
Mayhem & Chaos Coordinator
rob@eorbit.net

%# vi: set ts=2 sw=2 ft=mason :
<%args>
$id => ""
</%args>

<& /comp/sidebar, title => 'Add Artist Alias' &>

<%perl>

$m->comp("/comp/checkloggedin", 0, 1)
	or return;

MusicBrainz::IsNonNegInteger($id) && $id
	or return $m->comp("/comp/badargs", 0, 1);

$id != ModDefs::VARTIST_ID && $id != ModDefs::DARTIST_ID
	or return $m->comp(
		"/comp/error",
		"You cannot add an alias to this artist.",
		0, 1,
	);

my $mb = $m->comp("/comp/dblogin");

my $ar = Artist->new($mb->{DBH});
$ar->SetId($id);
$ar->LoadFromId
	or return $m->comp(
		"/comp/error",
		"Artist #$id does not exist",
		0, 1,
	);

my $artistname = $ar->GetName();
my $sortname = $ar->GetSortName();
my $modpending = $ar->GetModPending();

</%perl>

<& /comp/stylemenu &>

<& /comp/tablebegin, gattrs => "width='100%'",
	title => 'Add Artist Alias' &>

% if ($modpending) {
	<& /comp/modpending &>
% }

	Enter a new artist alias below:

	<form method="post" action="/bare/enter_mod.html" name="AddAliasForm"
		enctype="application/x-www-form-urlencoded">

    <table>
      <tr>
        <td>
					Artist Name:
        </td>
        <td>
					<% $artistname  %>
        </td>
      </tr>
      <tr>
        <td>
					New Artist Alias:
        </td>
        <td>
					<input type="text" name="new0" size=25 value="<% $artistname %>"> 
        </td>
      </tr>
      <tr>
        <td>
					<input type="submit" value="Submit">
        </td>
        <td>
					&nbsp;
        </td>
      </tr>
    </table>

    <input type="hidden" name="artist0" value="<% $id  %>">
    <input type="hidden" name="type0" value="<% ModDefs::MOD_ADD_ARTISTALIAS  %>">
    <input type="hidden" name="prev0" value="<% $artistname %>">
    <input type="hidden" name="table0" value="Artist">
    <input type="hidden" name="column0" value="Name">
    <input type="hidden" name="id0" value="<% $id %>">
    <input type="hidden" name="url" value="/showaliases.html?artistid=<% $id %>">

	</form>

<& /comp/tableend &>

% $mb->Logout;

<& /comp/movefocus, "AddAliasForm", "new0" &>
<& /comp/footer &>

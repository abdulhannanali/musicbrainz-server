<%perl>

my ($mb, $i, $j, $mod, $new, @idslabels, $ar);
my ($artistid, $artistname, $key, $found);

mc_comp("/comp/title", title=>'Select Artist');

$mb = new MusicBrainz;
$mb->Login();

$ar = Artist->new($mb);
@idslabels = $ar->FindTextInColumn("Artist", "SortName", $ARGS{new0});

$found = 0;
foreach $key (@idslabels)
{
    if (lc($key) eq lc($ARGS{new0}))
    {
       $found = 1;
       last;
    }
}
</%perl>

A search on <font class="title"><% $ARGS{new0} %></font>
has turned up the following matching artists that are similar to the 
artist name that you just entered. 

% if ($ARGS{mode} eq 'move') {
Please choose one of the artists below, and click Finish>> to
move album <% $ARGS{prev0} %> to the selected artist:
% } else {
Please choose one of the artists below, and click Finish>> to
merge artist <% $ARGS{prev0} %> with the selected artist:
% }

<form method="POST" action="/bare/enter_mod.html"
      enctype="application/x-www-form-urlencoded" class="formstyle">

% if (!$found) {
<input type="radio" name="new0" 
       value="$artistname">&nbsp;<% $ARGS{new0} %><br>
% }

<%perl>
for($i = 0; $i < scalar(@idslabels); $i++)
{
    $artistid = shift @idslabels;
    $artistname = shift @idslabels;
    mc_out(qq\<input type="radio" name="new0" 
           value="$artistname">&nbsp;$artistname<br>\);
}

foreach $key (keys %ARGS)
{
    next if ($key eq 'new0');

    mc_out(qq\<input type="hidden" name="$key" value="$ARGS{$key}">\);
    mc_out("\n");
}

</%perl>
<input type="submit" value="Finish>>" name="Search">
</form>
<%perl>

$mb->Logout();

</%perl>

<%perl>

my ($mb, @info, $row, $ind, $i, $offset, $num_artists);
my $max_items = 50;

$mb = new MusicBrainz;
mc_comp("/comp/title", title=>'Browse Artists');

mc_out("<center>");

$ind = $ARGS{index};
if (!defined $ind || $ind eq '')
{
    mc_out(qq/Select a letter to see the Artists that 
              begin with that letter:<br>/);
}
$offset = $ARGS{offset};
$offset = 0 if not defined $offset;
$offset = 0 if $offset < 0;

mc_comp("/comp/artistbrowsebox");
mc_out("</center>");

if (!defined $ind || $ind eq '')
{
    exit(0);
}

$mb->Login();

($num_artists, @info) = $mb->GetArtistList($ind, $offset, $max_items);

mc_out('<table width="100%"><tr>');
mc_comp("/comp/prevbutton", offset=>$offset, ind=>$ind, 
        text=>"< Prev", num=>$max_items);
mc_comp("/comp/prevbutton", offset=>$offset, ind=>$ind, 
        text=>"<< Prev", num=>($max_items * 2));
mc_out("<td width=\"40%\">&nbsp;</td>");
mc_comp("/comp/nextbutton", offset=>$offset, ind=>$ind, 
        text=>"Next >>", num=>($max_items * 2), rows=>$num_artists);
mc_comp("/comp/nextbutton", offset=>$offset, ind=>$ind, 
        text=>"Next >", num=>$max_items, rows=>$num_artists);
mc_out('</tr></table>');

</%perl>

<p><table align="center" width="100%">
% for($i = 0; ; $i+=2) {
%  $row = $info[$i];  
%  last if (!defined $row);
   <tr>
      <td valign=top>
         <% ($i + 1 + $offset) %>.
      </td>
      <td valign=top width="50%">
        <a href="/showartist.html?artistid=<% $$row[0] %>">
        <% $$row[1] %>
      </td>
      <td valign=top>
%     $row = $info[$i + 1];  
%     if (defined $row) {
            <% ($i + 1 + $offset) %>.
         </td>
         <td valign=top width="50%">
            <a href="/showartist.html?artistid=<% $$row[0] %>">
            <% $$row[1] %>
%     } else {
         &nbsp;</td><td>&nbsp;
%     }
      </td>
  </tr>
%}
</table>

% $mb->Logout;

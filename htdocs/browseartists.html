<%perl>

my ($mb, @info, $row, $ind, $i, $offset, $num_artists, $ar, $rows);
my $max_items = 50;

$mb = new MusicBrainz;
mc_comp("/comp/sidebar", title=>'Browse Artists');

mc_out("<center>");

$ind = $ARGS{index};
if (!defined $ind || $ind eq '')
{
    mc_out(qq/Select a letter to see the Artists that 
              begin with that letter:<br>/);
}
$offset = $ARGS{offset};
$offset = 0 if not defined $offset;
$offset = 0 if $offset < 0;

mc_comp("/comp/artistbrowsebox");
mc_out("</center>");
mc_out("<p>[ <a href=\"/addartist.html\">Add New Artist</a> ]<p>");

if (!defined $ind || $ind eq '')
{
    exit(0);
}

$mb->Login();
$ar = Artist->new($mb->{DBH});

($num_artists, @info) = $ar->GetArtistDisplayList($ind, $offset, $max_items);

mc_out('<table width="100%"><tr>');
mc_comp("/comp/artistlistprevbutton", offset=>$offset, ind=>$ind, 
        text=>"< Prev", num=>$max_items);
mc_comp("/comp/artistlistprevbutton", offset=>$offset, ind=>$ind, 
        text=>"<< Prev", num=>($max_items * 2));
mc_out("<td width=\"40%\">&nbsp;</td>");
mc_comp("/comp/artistlistnextbutton", offset=>$offset, ind=>$ind, 
        text=>"Next >>", num=>($max_items * 2), rows=>$num_artists);
mc_comp("/comp/artistlistnextbutton", offset=>$offset, ind=>$ind, 
        text=>"Next >", num=>$max_items, rows=>$num_artists);
mc_out('</tr></table>');

</%perl>

<& /comp/modnotice &>

% $rows = $max_items / 2;
<p><table align="center" width="100%">
% for($i = 0; $i < $rows; $i++) {
%  $row = $info[$i];  
%  last if (!defined $row);
   <tr>
      <td valign=top>
         <% ($i + 1 + $offset) %>.
      </td>
% if ($$row[2]) {
      <td valign=top width="50%" bgcolor="#FFFFCC">
% } else {
      <td valign=top width="50%">
% }
        <a href="/showartist.html?artistid=<% $$row[0] %>">
        <% $$row[1]  %>
      </td>
      <td valign=top>
%     $row = $info[$i + $rows];  
%     if (defined $row) {
            <% ($i + 1 + $rows + $offset) %>.
         </td>
% if ($$row[2]) {
         <td valign=top width="50%" bgcolor="#FFFFCC">
% } else {
         <td valign=top width="50%">
% }
            <a href="/showartist.html?artistid=<% $$row[0] %>">
            <% $$row[1]  %>
%     } else {
         &nbsp;</td><td>&nbsp;
%     }
      </td>
  </tr>
%}
</table>

% $mb->Logout;

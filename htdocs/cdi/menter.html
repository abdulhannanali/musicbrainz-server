<%args>
$tracks
$id
$toc
$artist=>0
</%args>
<%perl>

my ($mb); 
my ($i, $artistname, $modpending, $ar);
my ($dbh, $sth, $rv);

$mb = new MusicBrainz;
mc_comp("/comp/sidebar", title=>'Enter CD Information');

mc_comp("/comp/stylenotes");
mc_comp("/comp/artiststylenotes");

</%perl>

<script LANGUAGE="JavaScript">
function validate()
{ 
    if (
% for($i = 0; $i < $tracks; $i++) {
        document.EnterCD.track<% $i %>.value == "" ||
        document.EnterCD.artistname<% $i %>.value == "" ||
        document.EnterCD.sortname<% $i %>.value == "" ||
% }
        document.EnterCD.title.value == "")
    {
        alert("Please enter all the information for this CD.");
        return false;
    }
    return true;
};
</script>

<form method="POST" action="/cdi/done.html" Name="EnterCD"
      enctype="application/x-www-form-urlencoded" class="formstyle">

Please enter the CD information below:<p>

<table>
<tr>
   <td colspan="2" align="right" valign="top">CD Title:</td>
   <td>
     <input type="text" name="title" size="30"><p>
   </td>
</tr>

% for($i = 0; $i < $tracks; $i++) {
    <tr>
       <td valign="top"><font class="bold">Track <% $i + 1 %>:</font></td>
      <td align="right" valign="top">Track Name:</td>
      <td>
         <input type="text" name="track<% $i %>" size="30">
      </td>
    </tr>

    <tr>
      <td colspan="2" align="right" valign="top">Artist Name:</td>
      <td><input type="text" name="artistname<% $i %>" size="30"></td>
    </tr>

    <tr>
      <td colspan="2" align="right" valign="top">Sort Name:</td>
      <td><input type="text" name="sortname<% $i %>" size="30"><p></td>
    </tr>
% }
</table>

<input type="hidden" name="artist" value="<% Artist::VARTIST_ID %>">
<input type="hidden" name="id" value="<% $id %>">
<input type="hidden" name="toc" value="<% $toc %>">
<input type="hidden" name="tracks" value="<% $tracks %>">
<input type="submit" value="Next>>" name="Next"
       onClick="return validate(form);">
</form>

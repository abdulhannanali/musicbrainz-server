<%args>
$album
$artist
$nomod=>0
</%args>

<%perl>

my ($count, $trackcount, $trmids, @ids, $di, @attrs, $attr, $modpend, $nonalbum);

$trackcount = $album->GetTrackCount();
$trmids = $album->GetTRMCount();
$di = Discid->new($album->{DBH});
@ids = $di->GetDiscidFromAlbum($album->GetId());
@attrs = $album->GetAttributes();
$modpend = $album->GetAttributeModPending();
$nonalbum = $album->IsNonAlbumTracks();

</%perl>

<table width="100%" cellpadding="0" cellspacing="0" border="0">
<tr><td width="90%">
<% $trackcount %> 
<img src="/images/notes.gif" align="center" alt="Tracks" 
         width="13" height="13"
         title="This album has <% $trackcount %> Tracks">

% if (scalar(@ids) > 0) {
    &nbsp; &nbsp; &nbsp;<% scalar(@ids) %>
    <img src="/images/cd.gif" align="center" alt="CD" 
               width="13" height="13"
               title="This album has <% scalar(@ids) %> CD Index Ids">
% }
% if ($trmids > 0) {
    &nbsp; &nbsp; &nbsp;<% $trmids %>
    <img src="/images/trm.gif" align="center" alt="TRM" 
               width="30" height="11"
               title="This album has <% $trmids %> TRM Ids">&nbsp;
% }
<%perl>
if (!$nonalbum)
{
    mc_out("</td><td NOWRAP>[</td>");
    if ($modpend)
    {
        mc_out("<td bgcolor=\"#FFFFCC\" NOWRAP>") 
    }
    else
    {
        mc_out("<td NOWRAP>") 
    }
    mc_out("&nbsp;");
    if (scalar(@attrs) > 0) 
    {
        foreach $attr (@attrs) 
        {
            mc_out(", ") if ($count > 0);
            mc_out($album->GetAttributeName($attr));
            $count++;
        }
    }
    else
    {
        mc_out("None");
    }
    mc_out("</td><td NOWRAP>&nbsp;] ");

    if (exists $session{user} && !$nomod) 
    {
        mc_out("<a href=\"/editalbumattrs.html?id=" . $album->GetId());
        mc_out("&artist=" . $artist->GetId() . "\">Edit</a>");
    }
}
</%perl>
</td></tr>
</table>

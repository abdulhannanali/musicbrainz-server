<%args>
$album
$artist
$nomod=>0
</%args>

<%perl>

my ($count, $trackcount, $trmids, $discids, $di, 
    @attrs, $attr, $modpend, $nonalbum);

$trackcount = $album->GetTrackCount();
$trmids = $album->GetTrmidCount();
$discids = $album->GetDiscidCount();
@attrs = $album->GetAttributes();
$modpend = $album->GetAttributeModPending();
$nonalbum = $album->IsNonAlbumTracks();

</%perl>

<table width="100%" cellpadding="0" cellspacing="0" border="0">
<tr><td width="90%">
<% $trackcount %> 
<img src="/images/notes.gif" align="middle" alt="Tracks" 
         width="13" height="13"
         title="This album has <% $trackcount %> Tracks">

% if ($discids > 0) {
    &nbsp; &nbsp; &nbsp;<% $discids %>
    <img src="/images/cd.gif" align="middle" alt="CD" 
               width="13" height="13"
               title="This album has <% $discids %> CD Index Ids">
% }
% if ($trmids > 0) {
    &nbsp; &nbsp; &nbsp;<% $trmids %>
    <img src="/images/trm.gif" align="middle" alt="TRM" 
               width="30" height="11"
               title="This album has <% $trmids %> TRM Ids">&nbsp;
% }
<%perl>
if (!$nonalbum)
{
    $m->out("</td><td NOWRAP>[</td>");
    if ($modpend)
    {
        $m->out("<td bgcolor=\"#FFFFCC\" NOWRAP>") 
    }
    else
    {
        $m->out("<td NOWRAP>") 
    }
    $m->out("&nbsp;<a href=\"/popup/attrguide.html\" onclick=\"MyWindow=window.open('/popup/attrguide.html','AlbumAttributeGuide','toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=400,height=275'); return false;\">");
    if (scalar(@attrs) > 0) 
    {
        foreach $attr (@attrs) 
        {
            $m->out(", ") if ($count > 0);
            $m->out($album->GetAttributeName($attr));
            $count++;
        }
    }
    else
    {
        $m->out("None");
    }
    $m->out("</a></td><td NOWRAP>&nbsp;] ");

    if (exists $session{user} && !$nomod) 
    {
        $m->out("<a href=\"/editalbumattrs.html?id=" . $album->GetId());
        $m->out("\">Edit</a>");
    }
}
</%perl>
</td></tr>
</table>

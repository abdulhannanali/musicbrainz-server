<%args>
$track
$album
$artist
$tindex
$lyricspresent
$hilitetrack
$hilitecolor
$nomod
$trmcount=>0
$mbtagger=>0
</%args>

<%perl>

my ($bgcolor, $tr_bgcolor);
$bgcolor = ($track->GetModPending()) ? 'bgcolor="#FFFFCC"' : '';
$bgcolor = ($hilitetrack == $track->GetId()) ? 'bgcolor="#FFCCFF"' : $bgcolor;
$tr_bgcolor = ($track->GetAlbumJoinModPending()) ? 'bgcolor="#FFFFCC"' : '';

</%perl>

<tr>
    <td width="10%" align=center <% $tr_bgcolor |n %>>
       <% $track->GetSequence() %>
    </td>
% if ($album->GetArtist() == Artist::VARTIST_ID) {
    <td width="45%" <% $bgcolor |n %>>
% } else {
    <td width="75%" <% $bgcolor |n %>>
% }
% if ($mbtagger && !$nomod) {
    <a href="tag:<% $track->GetMBId() %>:<% $album->GetMBId() %>"><img src="/images/mblookup-tag.gif" 
       alt="Tag" title="Tag the current track" height="13" width="28"
       align="center" border="0"></a>
% }
% if ($lyricspresent == 1) {
       <a href="/showlyrics.html?id=<% $track->GetId() %>"><% $track->GetName() %></a>
% } else {
       <a href="/showtrack.html?trackid=<% $track->GetId() %>"><% $track->GetName() %></a>
% }
% if ($trmcount > 0) {
       &nbsp;<img src="/images/trm.gif" align="center" alt="TRM" width="30" 
                  height="11" title="<% $trmcount %> TRM Ids">&nbsp;
% }
    </td>
% if ($album->GetArtist() == Artist::VARTIST_ID) {
    <td width="30%">
       <a href="/showartist.html?artistid=<% $track->GetArtist() %>"><% $track->GetArtistName()  %></a>
% if (exists $session{user}) {
          (<a href="/changetrack.html?album=<% $album->GetId() %>&artist=<% $track->GetArtist() %>&tindex=<% $tindex %>&solo=1">Change</a>)
% }
    </td>
% }
% if (exists $session{user} && !$nomod) {
    <td width="15%" align=center>
       <a href="/edittrack.html?id=<% $track->GetId() %>&album=<% $album->GetId() %>&artist=<% $artist->GetId() %>">Edit</a>
       | <a href="/remtrack.html?id=<% $track->GetId() %>&album=<% $album->GetId() %>&artist=<% $artist->GetId() %>">Del</a>
    </td>
% }
</tr>

<%args>
$artist=>""
$album=>""
$artistobj=>undef
$albumobj=>undef
$data=>undef
</%args>

<%perl>

my ($search, $display);

$artist = $artistobj->GetName() if (defined $artistobj && $artistobj->GetName() ne '');
$album = $albumobj->GetName() if (defined $albumobj && $albumobj->GetName() ne '');

$artist = $data->{artist} if (defined $data && $artist eq '');
$album = $data->{album} if (defined $data && $album eq '');

$search = "$artist $album";
if ($artist ne '' && $album ne '')
{
    $display = "$album by $artist";
}
else
{
    $display = "$album $artist";
}

</%perl>

<br>
<p>
<table width="420"><tr><td>
<b>Artist/album/track not found?</b>
<p>

If the artist/album/track you are looking for was not found,
you can do the following things: 

<ul>
  <li>Import <a href="/freedb/freedb.html?search=<% url_escape($search) %>"><% $display %></a> 
      from FreeDB and then tag your track against the new album.</li>

% if ($artist ne '' && defined $artistobj) {
    <li>
    	<a href="/addnonalbumtracks.html?artistid=<% $artistobj->GetId %>"
		onclick="document.forms.AddNonAlbumTrack.submit(); return false"
		>Add a non-album track</a>
	to artist '<% $artist %>'.
    </li>
% }

  <li>Use the box below to modify your lookup criteria and try again:</li>
</ul>

</td></tr></table>

<form method="post" action="/addnonalbumtracks.html" id="AddNonAlbumTrack">
	<input type="hidden" name="artistid" value="<% $artistobj ? $artistobj->GetId : '' %>">
	<input type="hidden" name="trackname" value="<% $data->{track} %>">
</form>


<%args>
$artist=>""
$album=>""
$artistobj=>undef
$albumobj=>undef
$data=>undef
</%args>

<%perl>

my ($search, $display);

$artist = $artistobj->GetName() if (defined $artistobj && $artistobj->GetName() ne '');
$album = $albumobj->GetName() if (defined $albumobj && $albumobj->GetName() ne '');

$artist = $data->{artist} if (defined $data && $artist eq '');
$album = $data->{album} if (defined $data && $album eq '');

$search = "$artist $album";
if ($artist ne '' && $album ne '')
{
    $display = "$album by $artist";
}
else
{
    $display = "$album $artist";
}

</%perl>

<br>
<p>
<table width="420"><tr><td>
<b>Artist/album/track not found?</b>
<p>

If the artist/album/track you are looking for was not found,
you can do the following things: 

<ul>
  <li>
    <p>
      Import <a href="/freedb/freedb.html?search=<% uri_escape($search) %>"><% $display %></a>
      from FreeDB and then tag your track against the new album.
    </p>
  </li>

% if ($artist ne '' && defined $artistobj) {
    <li>
      <p>
    	<a href="/addnonalbumtracks.html?artistid=<% $artistobj->GetId %>"
		onclick="document.forms.AddNonAlbumTrack.submit(); return false"
		>Add a non-album track</a>
	to artist '<% $artist %>'.&nbsp;
	<b>Only do this if you know that the track has never been released
	on any album</b> (or single, etc).&nbsp; Don't use this simply
	because you can't find which album it's on (or haven't looked).
      </p>
    </li>
% }

  <li><p>Use the box below to modify your lookup criteria and try again:</p></li>
</ul>

</td></tr></table>

<form method="post" action="/addnonalbumtracks.html" id="AddNonAlbumTrack">
	<input type="hidden" name="artistid" value="<% $artistobj ? $artistobj->GetId : '' %>">
	<input type="hidden" name="trackname" value="<% $data->{track} %>">
</form>


<%args>

	$url
	$max_items => undef
	$update_interval => 5*60
	$categories => [ ]
	$read_more => 1

</%args>
<%perl>

	my $feed = MusicBrainz::Server::NewsFeed->new(
		url => $url,
		update_interval => $update_interval,
		max_items => $max_items,
		categories => $categories,
	);

	$feed->Load() if defined $feed;

</%perl>

<div class="boxeslist">

%   if (defined $feed) {
%    	foreach my $item ($feed->GetItems())
%    	{

        <div class="orangeheader">
            <div class="inner"><b><% $item->GetTitle() %></b></div>
        </div>
        <div class="boxcontent">
            <div class="inner">
                <% $item->GetDescription() |n %>
                <div class="datetime">Posted: <% $item->GetDateTimeString() %></div>

%    		if ($read_more)
%    		{
                <div class="readmore">&raquo; <a href="<% $item->GetLink() %>">read more</a></div>
%    		}

            </div>
        </div>

%     	}
%   } else { 
        XML::RSS is not installed -- no newsfeeds shown.
%   } 

</div>

%# vi: set ts=4 sw=4 ft=mason :

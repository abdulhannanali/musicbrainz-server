<%perl>
	# -----------------------------------------------------------------------------
	#                               Musicbrainz.org
	#                        Copyright (c) 2001 Robert Kaye
	# -----------------------------------------------------------------------------
	#  This software is provided "as is", without warranty of any kind, express or
	#  implied, including  but not limited  to the warranties of  merchantability,
	#  fitness for a particular purpose and noninfringement. In no event shall the
	#  authors or  copyright  holders be  liable for any claim,  damages or  other
	#  liability, whether  in an  action of  contract, tort  or otherwise, arising
	#  from,  out of  or in  connection with  the software or  the  use  or  other
	#  dealings in the software.
	#
	#  GPL - The GNU General Public License    http://www.gnu.org/licenses/gpl.txt
	#  Permits anyone the right to use and modify the software without limitations
	#  as long as proper  credits are given  and the original  and modified source
	#  code are included. Requires  that the final product, software derivate from
	#  the original  source or any  software  utilizing a GPL  component, such  as
	#  this, is also licensed under the GPL license.
	# -----------------------------------------------------------------------------
	#
	# Summary:
	# -----------------------------------------------------------------------------
	# Renders the edit note textarea, which is always the same
	# on all pages.
	#
	# $Id$
	#
</%perl>
<%args>

	$required => 0
	$notetext => ""
	@buttons => ()
	$showprivscheckbox => 1
	$showeditnotetext => 1

</%args>
<%perl>

	@buttons = ( ["Enter edit &raquo;", "btnYes"], ["Cancel", "btnCancel"] )
		if (not @buttons);

</%perl>


	<table class="editnote">
		<tr>


% 	if ($required)
%	{
			<td>Enter edit note (<strong>required</strong>):</td>
% 	}
%	else
%	{
			<td>Enter edit note (optional):</td>
% 	}

		</tr>
		<tr>
			<td class="textarea">
				<textarea name="notetext" id="notetext" class="textarea"
					rows="3" cols="52"><% $notetext %></textarea>
			</td>
		</tr>
		<tr>
			<td class="submitbuttons">

%	for my $button (@buttons)
%	{
%		my ($value, $id, $disabled) = @$button;
%		$disabled = qq!disabled="disabled"! if ($disabled);
%		$id = qq!id="$id"! if (defined $id);

				<input class="button" type="submit" name="submitvalue" value="<% $value |n %>" <% $id |n%> <% $disabled |n%> />

%	}

			</td>
		</tr>
	</table>


% 	if ($showeditnotetext)
%	{

	<div style="border: 1px dotted #000; padding: 5px; margin: 5px 0px; margin-left: 0px; margin-top: 10px; font-size: 11px; width: 500px">
		<strong>About edit notes:</strong>
		Please note that it is highly recommended to enter a
		<& /comp/linkdoc, "EditNote", "edit note", 0 &>. If you do
		so, your edit is more likely to be <& /comp/linkdoc, "EditingFAQ",
		"voted on, and unanimously accepted", 0 &> by the other MusicBrainz
		editors. If your edit receives the required number of  
		unanimous yes votes, it will be applied instantly, even before the
		voting period elapses in which edits usually are kept open.
        For detailed information on how long edits stay open and how many votes
        are required for it to pass unanimously, please see our
        <a href="/show/edit/conditions.html">edit conditions</a> page.
	</div>

%		$session{"orig_privs"} = $session{"privs"}
%			if (not exists $session{"orig_privs"});
%
% 		if ($showprivscheckbox && UserStuff->IsAutoEditor($session{"orig_privs"}))
%		{

	<div style="border: 1px dotted #000; padding: 5px; margin: 5px 0px; margin-left: 0px; font-size: 11px; width: 500px">
		<strong>AutoEditor privileges:</strong> If you untick this checkbox, this edit
		will be entered as if you would not have <& /comp/linkdoc, "AutoEditor", "AutoEditor", 0 &>
		status. You can enable them any time again.
		<br/>

%			my $ischecked = UserStuff->IsAutoEditor($session{"privs"});

		<input type="hidden" name="autoeditorpriv_enabled_old" value="<% $ischecked ? "on" : "" %>" />
		<input type="checkbox" name="autoeditorpriv_enabled_new" value="on"
%			$m->out($ischecked ? ' checked="checked" ' : "");
			/> Enable AutoEditor privileges
	</div>

% 		}
% 	}

%# vi: set ts=4 sw=4 ft=mason :

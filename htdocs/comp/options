<%perl>
# vi: set ts=4 sw=4 ft=mason :

my ($data, $selected) = @_;

my %selected;
@selected{@$selected} = () if ref $selected;
$selected{$selected} = 1 if defined $selected and not ref $selected;

for my $t (@$data)
{
	my ($value, $text, $on) = (ref($t) ? @$t : ($t));
	$on = exists $selected{$value}
		unless defined $on;
	$text = $value unless defined $text;
</%perl>
	<option value="<% $value %>" <% $on ? "selected" : "" %>><% $text %></option>
<%perl>
}

</%perl>

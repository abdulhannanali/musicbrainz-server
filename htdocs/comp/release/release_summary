<%args>
	$album
	$artist
	$showmodlinks => 1
	$showtrackartists => 0
</%args>
<%perl>
	my $release = $album;

	# track artist are either shown, if there are track artists != release artist
	# or if the link "show track artists" was clicked.
	my $isva = $album->HasMultipleTrackArtists || $showtrackartists;

	my $colspan = 3;
	$colspan++ if ($showmodlinks);
	$colspan++ if ($isva);

	my $trackcount = $release->GetTrackCount();
	my $trmids = $release->GetTrmidCount();
	my $puids = $release->GetPuidCount();
	my $discids = $release->GetDiscidCount();


</%perl>

	<tr class="summary">
		<td colspan="<% $colspan %>">
			<table class="releasesummary">
				<tr>
					<td class="statistics">
						<span class="tracks">
							<% $trackcount %>
							<img src="/images/notes.gif" alt="Tracks" title="This release has <% $trackcount %> Tracks" />
						</span>

% 	if ($discids > 0) {
						<span class="discid">
							<% $discids %>
							<img src="/images/cd.gif" alt="CD" title="This release has <% $discids %> Disc IDs" />
						</span>
%	}
%	if ($puids > 0) {
						<span class="puid">
							<% $puids %>
							<img src="/images/puid.gif" alt="PUID" title="This release has <% $puids %> PUIDs" />
						</span>
% 	}
%	if ($trmids > 0) {
						<span class="trmid">
							<% $trmids %>
							<img src="/images/trm.gif" alt="TRM" title="This release has <% $trmids %> TRM IDs" />
						</span>
% 	}
					</td>
					<td class="language">
<%perl>

	# 2. Release Language
	my $editwhat = "&nbsp;Language";
	my $nonalbum = $release->IsNonAlbumTracks();
 	if (!$nonalbum)
	{
		my $language = $release->GetLanguage;
		my $script = $release->GetScript;

		if ($language or $script)
		{
			$m->out(sprintf qq![ <span class="%s">%s, %s </span> ]!,
					$release->GetLanguageModPending() ? "mp" : "",
					$language ? $language->GetName() : "?",
					$script ?  $script->GetName() : "?");
			$editwhat = "";
		}
	}
	if ($session{"uid"} and $showmodlinks)
	{
		$m->out(sprintf qq!&nbsp;<a href="/edit/albumlanguage/edit.html?id=%s" title="%s">Edit%s</a>&nbsp;|&nbsp;!,
						$release->GetId(),
						"Edit Language and Script of this Release",
						$editwhat);
	}
	$m->out(qq!</td>\n!);


	# 3. Release Attributes
	$m->out(qq!<td class="attributes">!);
 	if (!$nonalbum)
	{
		my @attrs = $release->GetAttributes();
	    $m->out(qq![&nbsp;<a href="/popup/attrguide.html" id="POPUP::ReleaseAttributeGuide::400::275">!);
	    if (scalar(@attrs) > 0)
	    {
			$m->out(sprintf qq!<span class="%s">!,
					$release->GetAttributeModPending() ? "mp" : "");

			my $count = 0;
			for my $attr (@attrs)
			{
				$m->out(",&nbsp;") if ($count > 0);
				$m->out($release->GetAttributeName($attr));
				$count++;
			}
	      	$m->out("</span>");
		}
		else
		{
			$m->out("None");
		}
	    $m->out("</a>&nbsp;]");
	}
    if ($session{uid} and $showmodlinks)
    {
        $m->out(sprintf qq!&nbsp;<a href="/edit/album/editattributes.html?id=%s" title="%s">Edit</a>!,
        				$release->GetId(),
        				"Edit Language and Script of this Release",);
    }
</%perl>

					</td>
				</tr>
			</table>
		</td>
	</tr>

<%args>
$id
$table
$rowid
$artist
$type
$prev
$new
$time
$moderator
$yesvotes
$novotes
$voted
$artistname
$status
$mode
</%args>

<%perl>

my $text = "(Your change)";
if ($voted)
{
   $text = "(Already voted)";
}
my $modtype = Moderation::GetModificationName($type);
my @entered = localtime($time);
$time = sprintf "%d-%d %02d:%02d", $entered[4]+1, $entered[3], 
                                   $entered[2], $entered[1];

</%perl>

<tr>
<td bgcolor="#FFBA58" colspan=3><img src="/images/pixel.gif" width="1" height="1" alt="" border=""></td>
</tr>
<tr>
   <td width=38% valign=top bgcolor=white class="body">
     Moderator: <% $moderator %> (exp: <% $time %>)
   </td>
   <td width=38% valign=top bgcolor=white class="body">
     <% $modtype %>
     (<a href="/showartist.html?artistid=<% $artist %>"><% $artistname %></a>)
   </td>
   <td width=24% align=center valign=top valign=top bgcolor=white class="body">
     <% $yesvotes %> yes,
     <% $novotes %> no
   </td>
</tr>
<tr>
   <td width=40% valign=top bgcolor=white class="body">
     Old: <& /comp/showmodprev, prev=>$prev, 
             table=>$table, id=>$rowid, type=>$type &>
   </td>
   <td width=40% valign=top bgcolor=white class="body">
% if ($type == Moderation::MOD_ADD_TRACK) {
%    my (@data) = split(/\n/, $new);
     Name: <span class="bold"><% $data[0] %></span> 
     Track: <span class="bold"><% $data[1] %></span>
% } else {   
     New: <span class="bold"><% $new %></span> 
% }
   </td>
   <td width=20% align=center valign=top bgcolor=white class="body">
% if ($mode == Moderation::TYPE_MINE) {
     <% Moderation::GetChangeName($status) %>
% } elsif ($mode == Moderation::TYPE_VOTED) {
     <% Moderation::GetVoteText($voted) %>
% } elsif (($session{user} ne $moderator && !$voted) || 
%          DBDefs::ALLOW_SELF_VOTE) {
     Yes <input type="radio" name="rowid<% $id %>" value="yes">
     No <input type="radio" name="rowid<% $id %>" value="no">
     Abs <input type="radio" name="rowid<% $id %>" value="abs" CHECKED>
% } else {
     <% $text %> 
% }
   </td>
</tr>

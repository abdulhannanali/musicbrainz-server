<table class="SidebarSearch">
	<col style="width: 3em">
	<col>
	<& .QuickSearchForm,
		label => "Artist",
		action => "/newsearch.html",
		hidden_args => { table => "artist" },
		textname => "search",
		&>
	<& .QuickSearchForm,
		label => "Album",
		action => "/newsearch.html",
		hidden_args => { table => "album" },
		textname => "search",
		&>
	<& .QuickSearchForm,
		label => "Track",
		action => "/newsearch.html",
		hidden_args => { table => "Track" },
		textname => "search",
		&>
	<& .QuickSearchForm,
		label => "Editor",
		action => "/user/view.html",
		textname => "modname",
		&>
</table>

<%def .QuickSearchForm>
<%args>
$label
$method => "GET"
$action
$textname
$hidden_args => {}
</%args>
% my $formid = "qs$label"; $formid =~ s/\W//g;
	<tr>
		<th><label for="<% $formid %>_text"><% $label %></label></th>
		<td>
	<form method="<% $method %>" action="<% $action %>">
		<div>
			<input type="text" name="<% $textname %>" id="<% $formid %>_text" value=""
%# What is the official position on forms with no submit button?
%# Normally they're OK, and you can press "return" and the form is submitted.
%# Can we rely on this, always?
%# Anyway within the Tagger this fails, so we detect "return" ourselves.
% if ($session{mbt}) {
					onkeydown="if (event.keyCode==13) this.form.submit()"
% }
				>
			<& /comp/args-to-hidden-fields.inc, %$hidden_args &>
		</div>
	</form>
		</td>
	</tr>
</%def>

%# vi: set ts=2 sw=2 ft=mason :

<%args>
$ly
$trackid
$trackname
$artistname
$lyrics
$writer
@synctextids
</%args>

<%perl>

my ($i, $synctextid, @synctextdata, @amount);

mc_comp("/comp/title",title=>'Lyrics search result'); 
mc_comp("/comp/lyrics", 
        trackname=>$trackname, 
        artistname=>$artistname, 
        writer=>$writer,
        lyrics=>$lyrics);

if (scalar(@synctextids) > 0) {		#any Sync Text records to display ?
</%perl>
    <& /comp/tablebegin, title=>'Scrolling Text versions' &>

    Click on the number of text blocks to view the details of the scrolling text
    or click on the location to view the details off-site:

    <table><tr><th>No. Text Blocks</th><th>Type</th><th>Location</th><th>Submittor</th><th>Date</th></tr>
<%perl>
for($i = 0;; $i++) {
    $synctextid = $synctextids[$i]; 
    last if (!defined $synctextid);
    @synctextdata=$ly->GetSyncTextData($synctextid);
    @amount=$ly->GetSyncEventList($synctextid);
    mc_comp("/comp/synctext", 
            id=>$synctextid,
            amount=>scalar(@amount)/3,
            type=>$synctextdata[1],
            url=>$synctextdata[2],
            submittor=>$synctextdata[3],
            submitted=>$synctextdata[4]);
}
</%perl>
    </table>
    <& /comp/tableend &>
%}		#end of Sync Text display

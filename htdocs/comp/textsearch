<%args>

	$handlearguments => 0

</%args>
<%perl>

	$m->comp("/search/handle-searchsession.inc", %ARGS)
		if ($handlearguments);

	my $lucenesearch = '/search/textsearch.html';

</%perl>

<form method="get" action="/search/oldsearch.html" class="formstyle" id="TextSearchForm">
	<table class="formstyle">
		<tr>
			<td class="labelnopad"><label for="id_query">Search for:</label></td>
			<td>
				<input type="text" name="query" id="id_query" value="<% $session{"as_query"} %>" size="30" /></td>
		</tr>
		<tr>
			<td class="labelnopad"><label for="id_table">Type:</label></td>
			<td>
				<select name="type" id="id_table">
					<option value="artist" <% ($session{"as_type"} eq "artist") ? 'selected="selected"' : '' |n %>>Artists</option>
					<option value="release" <% ($session{"as_type"} eq "release") ? 'selected="selected"' : '' |n %>>Releases</option>
					<option value="track" <% ($session{"as_type"} eq "track") ? 'selected="selected"' : '' |n %>>Tracks</option>
				</select>
			</td>
		</tr>
		<tr>
			<td class="labelnopad"><label for="id_limit">Limit to:</label></td>
			<td>
				<select name="limit" id="id_limit">
					<option value="25" <% ($session{"as_limit"} eq 25) ? 'selected="selected"' : '' |n %>>Up to 25</option>
					<option value="50" <% ($session{"as_limit"} eq 50) ? 'selected="selected"' : '' |n %>>Up to 50</option>
					<option value="100" <% ($session{"as_limit"} eq 100) ? 'selected="selected"' : '' |n %>>Up to 100</option>
					<option value="0" <% ($session{"as_limit"} eq "0") ? 'selected="selected"' : '' |n %>>All</option>
			  </select>
			</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>
				<input type="submit" value="Direct Search &raquo;" title="Start search..." />
				<input type="submit" name="submitvalue" value="Reset" title="Reset search parameters" />
				<input type="hidden" name="handlearguments" value="1" /></td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>
				[ <a href="<% $lucenesearch %>" title="Search for the same query using the Indexed Search...">Indexed search</a> ]
			</td>
		</tr>
	</table>
</form>

%# vi: set ts=4 sw=4 ft=mason :

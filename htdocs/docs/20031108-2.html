%# vi: set ts=2 sw=2 ft=mason :
<& /comp/sidebar, title => "How TRM Generation Works" &>

<p>
	There are two steps involved in generating a TRM ID for an
	audio file.&nbsp; One of the steps involves licensed, proprietary,
	closed-source software; hence it is impossible to generate a TRM ID
	using only open-source software.
</p>

<h2>1. Generate an Audio Signature</h2>

<p>
	This step is performed by the MusicBrainz client software
	(mb_client and tunepimp modules).
</p>

<p>
	The audio file is opened, read, and analysed.&nbsp; Various
	things are measured, including the duration of the audio file,
	the frequency distribution, "beat" detection, and so forth.&nbsp;
	Together these measurements are the <i>Audio Signature</i>.
</p>

<h2>2. Turn the Audio Signature into a TRM ID</h2>

<p>
	The MusicBrainz client software now sends the Audio Signature
	to the <i>Relatable TRM Signature Server</i>.&nbsp;
	The Signature Server is closed-source proprietary software,
	licensed to MusicBrainz by
	<a href="http://www.relatable.com/">Relatable</a>.&nbsp;
	Our licensed copy of the Signature Server runs on the same hardware as the
	MusicBrainz Server, but please understand that it is quite
	separate software.
</p>

<p>
	After receiving the Audio Signature data, the Signature Server does
	whatever it does (remember, it's a "black box" to us),
	and it returns a TRM ID to the MusicBrainz client software.&nbsp;
	The client software can then do whatever it wants with the TRM ID,
	such as make a <i>TrackInfoFromTRMId</i> RDF request to the MusicBrainz
	Server in order to find out what track it is.
</p>

<p>
  If the TRM ID returned is one of these special TRMs, do not look these TRM
	up on the server:
</p>

<ul>
<li>f9809ab1-2b0f-4d78-8862-fb425ade8ab9: File is too short to calculate a TRM for.</li>
<li>c457a4a8-b342-4ec9-8f13-b6bd26c0e400: The TRM server is too busy at the moment. Please retry again later.</li>
</ul>

<p>
  The last special TRM is reserved for silence: 7d154f52-b536-4fae-b58b-0666826c2bac. It is OK to look
	up this track in MB, but be warned: there will be many hits for this one.
</p>

<h2>Further Reading</h2>

<p>
	The document
	<a href="/docs/20031108-1.html">Dissecting a Tagger Session</a>
	analyses the various HTTP (web, RDF, TRM) requests
	made by the MusicBrainz Tagger as a file is tagged.
</p>

<& /comp/footer &>

%# vi: set ts=4 sw=4 ft=mason :
<%perl>

$m->comp("/comp/checkloggedin", 1, 1)
	or return;

my @types = MusicBrainz::Server::LinkEntity->Types;

my %n = map {
	$_, MusicBrainz::Server::LinkEntity->NameFromType($_)
} @types;

my $is_link_mod = UserStuff->IsLinkModerator($session{privs});

</%perl>
<& /comp/sidebar, title => 'Link Types', head => '
<style type="text/css">
.PadRight th,
.PadRight td
{
	padding-right: 2em;
	text-align: center;
}
</style>
'&>

<div class="LinksRow"> [
	<a href="/mod/link/selectlink.html">Create a link</a>
] </div>

<p>
	Please select which group of link types you
	would like to view:
</p>

<h3>Standard link types</h3>

<table class="PadRight">
	<tr>
		<th></th>
%		for my $top (@types) {
%           next if ($top eq 'url');          
    		<th><% $n{$top} %></th>
%		}
	</tr>
%	for my $left (@types) {
	<tr>
		<th><% $n{$left} %></th>
%		for my $top (@types) {
%           next if ($top eq 'url');          
		<td>
%			if ($left ge $top) {
			<a href='/mod/link/link_types.html?type=<%
				MusicBrainz::Server::LinkType->PackTypes([ $top, $left ])
				%>'><% $n{$top} %> - <% $n{$left} %></a>
%			} else {
			-
% }
		</td>
%		}
	</tr>
%	}
</table>

<h3>Link Attributes</h3>

<p>
%if ($is_link_mod) {
<a href="/mod/link/link_attrs.html">Edit link attributes</a>
%} else {
<a href="/mod/link/link_attrs.html">View link attributes</a>
%}
</p>

<& /comp/footer &>

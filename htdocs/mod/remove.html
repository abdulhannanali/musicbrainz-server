%# vi: set ts=2 sw=2 ft=mason :
<%args>
$modid=>0
$confirm=>0
$url=>""
</%args>

<& /comp/sidebar, title=>'Confirm Moderation Removal', expand=>'moderate' &>

<%perl>
	if ($modid == 0)
	{
		$m->comp("/comp/badargs");
		return undef;
	}

	my $mb = $m->comp("/comp/dblogin");
	my $mod = Moderation->new($mb->{DBH});
	$mod = $mod->CreateFromId($modid);

	$mb->Logout();
</%perl>

<fieldset>
	<legend>Confirm Moderation Removal</legend>
	<div class="padleft">
		<table>
			<tr>
				<td colspan="2">Do you want to remove this moderation?</td>
			</tr>
			<tr>
				<td> &nbsp; </td>
				<td>
					<%perl>
						$mod->ShowModType($m);
					</%perl></td>
			</tr>
			<tr>
				<td>&nbsp;</td>			
				<td>
				<%perl>
					$mod->ShowPreviousValue($m);
				</%perl></td>
			</tr>
			<tr>
				<td>&nbsp;</td>			
				<td>
				<%perl>
					$mod->ShowNewValue($m);
				</%perl></td>
			</tr>
		</table>
	</div>

	<div class="padlefttop">
		<table>
			<tr>
				<td>
					<form 	method="POST" action="/bare/remove_mod.html"
							name="ModFormNo">
						<%perl>
						my $arg;
							for $arg (keys %ARGS)
							{
								$m->out("<input type=\"hidden\" name=\"$arg\" value=\"$ARGS{$arg}\">\n");
							}
						</%perl>
						<input type="hidden" name="confirm" value="no">
						<input name="btnNo" type="submit" class="button" value="&laquo; NO">
					</form></td>
				<td> &nbsp; </td>
				<td>
					<form 	method="POST" action="/bare/remove_mod.html"
							name="ModFormYes">
						<%perl>
							for $arg (keys %ARGS)
							{
								$m->out("<input type=\"hidden\" name=\"$arg\" value=\"$ARGS{$arg}\">\n");
							}
						</%perl>
						<input type="hidden" name="confirm" value="yes">
						<input name="btnYes" type="submit" class="button" value="YES &raquo;">
					</form></td>
			</tr>
		</table>
	</div>
</fieldset>

<& /comp/movefocus, "ModFormNo" &>
<& /comp/footer &>

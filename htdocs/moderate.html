%# vi: set ts=4 sw=4 ft=mason :
<%args>
$type => &ModDefs::TYPE_NEW
$offset => 0
$page => 0
$artistid => 0
$albumid => 0
$moderator => 0
</%args>
<%perl>

$m->comp("/comp/checkloggedin", 1, 1)
	or return;

MusicBrainz::IsNonNegInteger($type) && $type && $type <= &ModDefs::TYPE_MAX
	or return $m->comp("/comp/badargs", 1, 1);
MusicBrainz::IsNonNegInteger($offset)
	or return $m->comp("/comp/badargs", 1, 1);
MusicBrainz::IsNonNegInteger($page)
	or return $m->comp("/comp/badargs", 1, 1);

MusicBrainz::IsNonNegInteger($artistid) && $artistid
	or return $m->comp("/comp/badargs", 1, 1)
	if $type == &ModDefs::TYPE_ARTIST;

MusicBrainz::IsNonNegInteger($albumid) && $albumid
	or return $m->comp("/comp/badargs", 1, 1)
	if $type == &ModDefs::TYPE_ALBUM;

MusicBrainz::IsNonNegInteger($moderator) && $moderator
	or return $m->comp("/comp/badargs", 1, 1)
	if $type == &ModDefs::TYPE_MODERATOR;

$m->comp(
	"/comp/moderatepage",
	offset => $offset,
	page => $page,
	type => $type,
	artistid => $artistid,
	albumid => $albumid,
	moderator => $moderator,
);

</%perl>

<& /comp/footer &>

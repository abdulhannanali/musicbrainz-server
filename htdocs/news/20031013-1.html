%# vi: set ts=2 sw=2 ft=mason :
<& /comp/sidebar, title => 'October 13th, 2003: Server Updates', head => '
<style type="text/css">
ul, ol { padding-left: 0.7em }
li { margin-top: 0.5em; margin-bottom: 0.5em }
</style>
' &>

<h2>Changes mainly of interest to MusicBrainz Users</h2>

<h3>Album "Meta" Counts</h3>

<p>
The count of tracks, disc ids and TRMs held for each album (the "albummeta"
data) were often inaccurate.&nbsp; Additionally, some albums didn't have an
"albummeta" row, which actually caused them to disappear entirely from their
respective artists' pages!&nbsp; These bugs have now been fixed.
</p>
<p>
The "compact" display mode of the "show artist" page displays these counts; if
one of the counts is zero it now just leaves a blank space, instead of showing
a zero next to the relevant icon.&nbsp; This makes it easier to spot which albums
have no disc ids or no TRMs.
</p>
<p>
Like the "compact" display mode, these meta counts are now also shown when you
perform an album search.
</p>

<h3>Non-Album Tracks</h3>

<p>
The album name "Non-album tracks" is now changed to "[non-album tracks]", in
keeping with the style of using "[...]" to signify special meaning within
MusicBrainz (e.g. [silence], [data track] etc).
</p>
<p>
As new N.A.T. albums are created, they (i.e. the album name itself) won't be
added to the search indices (although the tracks within them will be).&nbsp; The
existing N.A.T. album names are staying in the indices, for now, but may be
removed soon.
</p>
<p>
If two artists, both with N.A.T. albums, are merged, then the two N.A.T.
albums are merged together, keeping all the tracks.
</p>
<p>
Previously if the track numbers of non-album tracks for an artist were not
continuous (if there were gaps " e.g. 1, 2, 4, 5) then adding a N.A.T. would
fail.&nbsp; This is now fixed.
</p>
<p>
N.A.T. albums are automatically deleted when their last track is removed.
</p>
<p>
The "show track" page no longer shows the (meaningless) track sequence number
for non-album tracks.
</p>

<h3>The Tagger</h3>

<p>
When showing a list of matching tracks, the track length is highlighted
according to how well it matches the length of the track you're trying to
tag.&nbsp; Green indicates a good match, red represents a very bad match, and
blue is somewhere in the middle.&nbsp; If insufficient information is
available, it's black.
</p>
<p>
Also when showing match tracks, a "tag" link is included on that page, so you
don't need to click through to the next page in order to tag.
</p>
<p>
The main lookup page (/taglookup.html) now moves the input focus into the form
when the page loads. Also, the % relevance values shown in the lookup page now
use the same more detailed algorithm (weighted similarity calculation) the tagger 
uses. This should make the overall matching process more accurate.
</p>
<p>
The sidebar search panel now works when used within the Tagger.
</p>

<h3>Voting</h3>

<p>
You can now vote more than once on each moderation.&nbsp; Only your most recent
vote counts.&nbsp; In other words, you can change your mind.&nbsp; Because of this, you
must now wait until the moderation closes before you can see a list of all
votes for a moderation (on /showmod.html).&nbsp; If it's your moderation you can
always see the votes, of course.
</p>
<p>
Also on the "show moderation" page (/showmod.html) you can now see the date
and time at which each vote was cast.&nbsp; If someone votes more than once (and
changes their mind), then the old, ignored votes are shown in grey.
</p>
<p>
It's now also possible to have a "No Vote" button " go to your preferences
page to enable it.&nbsp; This makes it much easier to vote on a whole page of
moderations, but not vote on some of them (in which case, those moderations
will keep on showing up in your list of things to vote on).&nbsp; This is
controlled by two new preferences: "Abstain by default" and "Show the 'No
Vote' option".&nbsp; Try out the four possible combinations to see how they work.
</p>

<h3>Miscellaneous</h3>

<p>
A "Search Google" link has been added to the "show album" and "show track"
pages.&nbsp; These Google links now search for exact phrases, hopefully making it
easier to find what you want more quickly.&nbsp; So for example if you click the
"search" link from <a href="http://www.musicbrainz.org/showtrack.html?trackid=286059"
>this track</a>, the search query used is <b>"Alice in Chains" "Love, Hate, Love"</b>.
</p>
<p>
Clicking on the album attributes link (which normally pops up the attributes
guide) now works without Javascript too.
</p>
<p>
"Remove Track" mods now show both the track name (with link) and the album
name (with link).
</p>
<p>
In the "batch operation" page (where you select what you want to do to the
albums you just tagged), if fewer than 2 albums are tagged, then we now show a
disabled "Select" button, instead of the message "Merge album not
available".&nbsp; This is more consistent with how such user interfaces
usually work.
</p>
<p>
"Guess Case" now knows to keep these abbreviations in upper case: DJ, MC, TV,
MTV.
</p>
<p>
The "top moderators" page now shows the top 25 moderators, not just the top
10.
</p>
<p>
There was a problem with anonymously adding albums; this is now believed to be
fixed.
</p>
<p>
Some moderators have proven that they can't be trusted with the ability to
"automod" case-changes, because they make many case changes which go against
the style guide for no valid reason.&nbsp; To handle this, a new "privilege" has
been created, dubbed the "Untrusted" bit.&nbsp; Moderators given this bit cannot
automod anything, except for "Add TRMs".
</p>
<p>
Incomplete home page URLs entered in moderators' profiles are now "guessed",
so for example www.example.com becomes http://www.example.com/
</p>
<p>
On the "create new login" page, a few paragraphs of help text have been added
about what we will and won't do with your e-mail address.
</p>
<p>
You must be logged in to send a message to another moderator.
</p>

<h2>Changes mainly of interest to MusicBrainz Programmers</h2>

<p>
Some TRMs were associated with some tracks more than once.&nbsp; This caused some
RDF queries to return duplicate results.&nbsp; These duplicates have now been
fixed, and the "insert" code has been modified to prevent them from
reappearing.
</p>
<p>
The "FindDistinctTRMID" RDF query was failing because returning TRMs as
results wasn't properly handled.&nbsp; This has now been fixed.
</p>

<h2>Changes mainly of interest to MusicBrainz Server Programmers</h2>

<p>
Mail is now generated using MIME::Lite instead of "hand-crafting" the headers
etc.&nbsp; As well as making it much more likely that this is done correctly, it
also means that it will be much easier to use more advanced MIME capabilities
(e.g. HTML e-mail, attachments) in the future.
</p>
<p>
Unique database indices have been added to trmjoin (trm, track) and albumjoin
(album, track).&nbsp; A primary key "id" column has been added to both
moderator_preference and moderator_subscribe_artist.
</p>
<p>
Tagger sessions are now automatically recognised by the web server, and a
"mbt=1" is written into their session data (even before the user has logged
in).&nbsp; This is done by detecting the request to "/tagger/intro.html?mbt=1",
which is the first page loaded by the Tagger, and which nothing else would
normally use.&nbsp; This makes it possible to more reliably detect when the web
session is within the Tagger, and adjust accordingly (e.g. the sidebar search
panel).
</p>

<h2>Bugs and RFEs Closed</h2>

<& buglist.inc,
	'682303 FreeDB import from within tagger: show "tag" link',
	'749780 Improve "Add Album" mod dependencies',
	'755549 Artist merge should merge "non-album" albums',
	'757412 Strange Postgres error',
	'766635 Auto-delete empty "non-albums"',
	'779204 Bad links on download page',
	'787652 Soundtracks',
	'805902 broken links on htdocs/user/view.html',
	'809387 Tagger browser filters CR / Forms with no "submit" button',
	'809481 No tag buttons after album import ',
	'809767 Unclear wording on "merge albums" page',
	'810605 TRMs associated with track more than once',
	'811822 Can\'t add Non-Album Tracks (sequence numbers wrong)',
	'813398 Track times color highlighting',
	'814892 Can\'t add note to moderations',
	'818056 Web Submission: Died at Moderation.pm line 447',
	'819002 Add tag icons to taglookup albumtrack displays',
	'819225 misleading TRM summary',
	&>

Dave Evans

<& /comp/footer &>

%# vi: set ts=2 sw=2 ft=mason :
<& /comp/sidebar, title=>'How to import the MusicBrainz server data' &>

<p>
	The MusicBrainz database is held in a
	<a href="http://www.postgresql.org/">PostgreSQL</a>
	relational database, hence the data dumps are done in
	the PostgreSQL "dump" format, as produced by the "pg_dump" tool.&nbsp;
	This means it's by far the most straightforward option to import the
	MusicBrainz data into another PostgreSQL database.&nbsp;
	If you want to get the data into some other format (e.g. some other
	database such as Oracle, MS SQL Server or MySQL), it's probably easiest
	to load the data into a PostgreSQL database first, and go from there.
</p>

<p>
	Assuming your eventual goal is to have a working MusicBrainz server,
	getting the data imported is actually quite easy:
</p>

<ol>
	<li>
		Firstly make sure you've installed all the prerequisite software
		for a MusicBrainz server (in particular Perl 5.8, PostgreSQL 7.3, and DBI and
		DBD::Pg Perl modules).&nbsp; You'll need Apache, mod_perl and Mason
		for a fully-working server (plus a whole load of other Perl modules),
		but if all you want is a populated database, you can probably skip those
		for now.
	</li>
	<li>
		Check out the
		<a href="http://cvs.musicbrainz.org/cvs/mb_server/"
			>mb_server</a> project from the MusicBrainz CVS
		repository.&nbsp;
		(See <a href="/development/cvs.html">instructions</a> for how to do this.)
	</li>
	<li>
		Edit <a href="http://cvs.musicbrainz.org/cvs/mb_server/cgi-bin/DBDefs.pm?rev=HEAD&amp;content-type=text/vnd.viewcvs-markup"
			>mb_server/cgi-bin/DBDefs.pm</a>
		and set DSN, DB_NAME, DB_USER and DB_PASSWD to the appropriate values
		(i.e. choose a database name and database owner, and set those values
		accordingly).&nbsp;
		(You can omit this step if you're happy with the defaults, which are
		usually reasonable).
	</li>
	<li>
		<a href="/products/server/download.html">Download</a> the dump files
		(*.tar.bz2 - currently there are five files to download).
	</li>
	<li>
		Run <kbd>mb_server/admin/InitDb.pl --createdb --import mb*.tar.bz2</kbd>
		(you'll need enough space in <code>/tmp</code> for the script to unpack
		all the archives at once).
	</li>
</ol>

<p>
	That should be it!&nbsp; The InitDb.pl script should then create
	the database user, the database, the tables, import the data, and set up all
	the required indexes, views and so forth.
</p>

<p>
	(For the latest instructions on how to import the data, check the
	<a href="http://cvs.musicbrainz.org/cvs/mb_server/INSTALL?rev=HEAD&amp;content-type=text/vnd.viewcvs-markup"
		>INSTALL</a> file in CVS.&nbsp; This web page is meant to be up-to-date,
	but in case it's not, "INSTALL" is the definitive reference.)
</p>

<p>
	If you need help importing the data, please find us via
	the <a href="/support/contact.html">contact</a> page.
</p>

<& /comp/footer &>

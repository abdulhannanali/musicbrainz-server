%# vi: set ts=4 sw=4 ft=mason :
<& /comp/sidebar, title=>"Install Firefox Search Plugins", expand=>'search' &>

<script type="text/javascript">
<!--
function errorMsg(name,ext,cat)
{
  f=document.createElement("form");
  f.setAttribute("name","installform");
  f.setAttribute("method","post");
  f.setAttribute("action","http://<% $r->server->server_hostname %>/search/plugins/firefox/error.html");
  fe=document.createElement("input");
  fe.setAttribute("type","hidden");
  fe.setAttribute("name","name");
  fe.setAttribute("value",name);
  f.appendChild(fe);
  fe=document.createElement("input");
  fe.setAttribute("type","hidden");
  fe.setAttribute("name","ext");
  fe.setAttribute("value",ext);
  f.appendChild(fe);
  fe=document.createElement("input");
  fe.setAttribute("type","hidden");
  fe.setAttribute("name","cat");
  fe.setAttribute("value",cat);
  f.appendChild(fe);
  document.getElementsByTagName("body")[0].appendChild(f);
  if (document.installform) { 
    document.installform.submit();
  } else {
    location.href="http://<% $r->server->server_hostname %>/search/plugins/firefox/error.html"; //hack for DOM-incompatible browsers
  }
}
function addEngine(name,ext,cat)
{
  if ((typeof window.sidebar == "object") && (typeof
  window.sidebar.addSearchEngine == "function"))
  {
    //cat="Web";
    //cat=prompt("In what category should this engine be installed?","Web")
    window.sidebar.addSearchEngine(
      "http://<% $r->server->server_hostname %>/search/plugins/firefox/"+name+".src",
      "http://<% $r->server->server_hostname %>/search/plugins/firefox/"+name+"."+ext,
      name,
      cat );
  }
  else
  {
    errorMsg(name,ext,cat);
  }
}
//-->
</script>

<p>
Use the following links to install the Firefox/Mozilla search plugins. These plugins will allow
you to search for MusicBrainz items directly from the browser:
</p>

<ul>
<li><a href="javascript:addEngine('musicbrainzartist','gif','Arts')">Install artist search plugin</a></li>
<li><a href="javascript:addEngine('musicbrainzalbum','gif','Arts')">Install album search plugin</a></li>
<li><a href="javascript:addEngine('musicbrainztrack','gif','Arts')">Install track search plugin</a></li>
</ul>

<p>
Should you want to remove these plugins, please follow these 
<a href="http://kb.mozillazine.org/index.phtml?title=Firefox_:_FAQs_:_Uninstall_Search_Plugins">instructions</a>.
</p>

<p>
Thanks to Kim Plowright for creating these plugins!
</p>

<& /comp/footer &>

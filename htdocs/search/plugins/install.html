%# vi: set ts=4 sw=4 ft=mason :

<& /comp/sidebar-notitle, pagetitle=>"Install Browser Search Plugins" &>

<& /comp/tablebegin, title=>"Install Browser Search Plugins" &>

	Use the following links to install the browser search plugins. These plugins will allow
	you to search for MusicBrainz items directly from your browser:

	<div style="margin-top: 20px">
		<b>Indexed search plugins:</b>
		<br/>
		[
			<a href="javascript: addSearchEngine('musicbrainzartist','aicon.png','Arts')" title="Install indexed Artists search plugin">Artists</a> |
			<a href="javascript: addSearchEngine('musicbrainzlabel','bicon.png','Arts')" title="Install indexed Labels search plugin">Labels</a> |
			<a href="javascript: addSearchEngine('musicbrainzrelease','licon.png','Arts')" title="Install indexed Releases search plugin">Releases</a> |
			<a href="javascript: addSearchEngine('musicbrainztrack','ticon.png','Arts')" title="Install indexed Tracks search plugin">Tracks</a>
		]
	</div>

	<div style="margin-top: 20px">
		<b>Direct search plugin:</b>
		<br/>
		[
			<a href="javascript: addSearchEngine('musicbrainzartist-old','aicon.png','Arts')" title="Install direct Artists search plugin">Artists</a> |
			<a href="javascript: addSearchEngine('musicbrainzlabel-old','bicon.png','Arts')" title="Install direct Labels search plugin">Labels</a> |
			<a href="javascript: addSearchEngine('musicbrainzrelease-old','licon.png','Arts')" title="Install direct Releases search plugin">Releases</a> |
			<a href="javascript: addSearchEngine('musicbrainztrack-old','ticon.png','Arts')" title="Install direct Tracks search plugin">Tracks</a>
		]
	</div>

	<div style="margin-top: 20px">
		Should you want to remove these plugins, please follow these
		<a href="http://kb.mozillazine.org/Uninstall_search_plugins">instructions</a>.
	</div>

	<script type="text/javascript">
	<!--
		function errorMsg(name, ext, cat) {
			f=document.createElement("form");
			f.setAttribute("name","installform");
			f.setAttribute("method","post");
			f.setAttribute("action","http://<% &DBDefs::WEB_SERVER %>/search/plugins/error.html");
			fe=document.createElement("input");
			fe.setAttribute("type","hidden");
			fe.setAttribute("name","name");
			fe.setAttribute("value",name);
			f.appendChild(fe);
			fe=document.createElement("input");
			fe.setAttribute("type","hidden");
			fe.setAttribute("name","ext");
			fe.setAttribute("value",ext);
			f.appendChild(fe);
			fe=document.createElement("input");
			fe.setAttribute("type","hidden");
			fe.setAttribute("name","cat");
			fe.setAttribute("value",cat);
			f.appendChild(fe);
			document.getElementsByTagName("body")[0].appendChild(f);
			if (document.installform) {
				document.installform.submit();
			} else {
				// hack for unsupported browsers
				location.href="http://<% &DBDefs::WEB_SERVER %>/search/plugins/error.html";
			}
		}

		function addSearchEngine(name, icon, cat) {
			if (window.external && ("AddSearchProvider" in window.external)) {
				// Firefox 2 and IE 7, OpenSearch
				window.external.AddSearchProvider("http://<% &DBDefs::WEB_SERVER %>/search/plugins/opensearch/"+name+".xml");
			} else if ((typeof window.sidebar == "object") &&
				(typeof window.sidebar.addSearchEngine == "function")) {
				// Firefox <= 1.5, Sherlock
				window.sidebar.addSearchEngine(
				  "http://<% &DBDefs::WEB_SERVER %>/search/plugins/firefox/"+name+".src",
				  "http://<% &DBDefs::WEB_SERVER %>/images/"+icon,
				  name,
				  cat
				);
			} else {
				errorMsg(name,icon,cat);
			}
		}
	//-->
	</script>


<& /comp/tableend &>
<& /comp/footer &>

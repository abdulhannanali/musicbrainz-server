<& /comp/title, title=>'Artist Search Results' &>

<%perl>

# TODO: The data in the rows is not escaped!

my ($mb); 
my (@data, $i, $row, $ar);

$mb = new MusicBrainz;
$mb->Login();
$ar = Artist->new($mb);

@data = $ar->SearchByName($ARGS{artist});
if (scalar(@data) > 0)
{
</%perl>

    <& /comp/tablebegin, title=>'Found Artists' &>
    Click on the artist name to see all the albums for that artist:

    <table>
%   for($i = 0;; $i++) {
%      $row = $data[$i];
%      last if (!defined $row);
       <tr>
         <td>
           <a href="/showartist.html?artistid=<% $$row[0] %>">
           <% $$row[2]  %></a>
         </td>
       </tr>
%   }
    </table>
    <& /comp/tableend &>
%} else {
    There were no items found. Please try again:<p>
    <& /comp/artistsearchbox &>
%}
% $mb->Logout();

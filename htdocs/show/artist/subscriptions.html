%# vi: set ts=4 sw=4 ft=mason :
<%args>

	$artist => undef

</%args>
<%perl>

my ($id, $mbid);
if (MusicBrainz::Server::Validation::IsNonNegInteger($artist)) { $id = $artist }
elsif (MusicBrainz::Server::Validation::IsGUID($artist)) { $mbid = $artist }
else { return $m->comp("/comp/badargs", 1, 1) }

return $m->comp("/comp/error", "Public subscription lists are not released until Tue Mar 15 20:30:00 2005 UTC", 1, 1)
	unless time() >= 1110918600;

my $mb = $m->comp("/comp/dblogin");

$artist = MusicBrainz::Server::Artist->new($mb->{DBH});
$artist->SetMBId($mbid) if $mbid;
$artist->SetId($id) if $id;
$artist->LoadFromId()
	or return $m->comp(
		"/comp/error",
		"Artist not found in the database.",
		1, 1,
	);

</%perl>

	<& /comp/sidebar,
		pagetitle => "Subscriptions for artist: " . $artist->GetName(),
		title => '' 
	&>

	<& /comp/artisttitle, artist=>$artist, showratings => 1 &>

	<& /comp/subscribersbox, artist=>$artist, title=>'Editors subscribed to this artist' &>

	<& /comp/footer &>

%# vi: set ts=4 sw=4 ft=mason :

%# vi: set ts=4 sw=4 ft=mason :
<%args>

	$label => undef

</%args>
<%perl>

	my ($id, $mbid);
	if (MusicBrainz::Server::Validation::IsNonNegInteger($label))
	{
		$id = $label
	}
	elsif (MusicBrainz::Server::Validation::IsGUID($label))
	{
		$mbid = $label
	}
	else
	{
		return $m->comp("/comp/badargs", 1, 1)
	}

	my $mb = $m->comp("/comp/dblogin");

	$label = MusicBrainz::Server::Label->new($mb->{DBH});
	$label->SetMBId($mbid) if $mbid;
	$label->SetId($id) if $id;
	$label->LoadFromId()
		or return $m->comp(
			"/comp/error",
			"Label not found in the database.",
			1, 1,
		);

</%perl>

	<& /comp/sidebar,
		pagetitle => "Subscriptions for label: " . $label->GetName(),
		title => '', 
	&>

	<& /comp/labeltitle, label=>$label, $showratings => 1 &>

	<& /comp/subscribersbox, label=>$label, title=>'Editors subscribed to this label' &>

<& /comp/footer &>

%# vi: set ts=4 sw=4 ft=mason :

<%perl>

my ($mb); 
my ($artistid, $albumid, $ar, $al); 

$mb = new MusicBrainz;
$mb->Login();
$albumid = $ARGS{albumid};

$ar = Artist->new($mb);
if (! $ar->LoadFromAlbumId($albumid))
{
    print("This Album (ID=$albumid) was not found<br>");
}
else
{
    $artistid = $ar->Value('id');
    
    mc_comp("/comp/artisttitle", 
            artistname=>$ar->Value(1), 
            artistid=>$ar->Value(0),
            modpending=>$ar->Value(3));
    
    mc_comp("/comp/modnotice");
    
    $al = Album->new($mb);
    $al->LoadFromId($albumid);
    if ($artistid == 0)
    {
        mc_comp("/comp/malbum", 
                albumid=>$al->Value(0), 
                albumname=>$al->Value(1), 
                mb=>$mb,
                modpending=>$al->Value(2));
    }
    else
    {
        mc_comp("/comp/album", 
                albumid=>$al->Value(0), 
                albumname=>$al->Value(1), 
                artist=>$artistid,
                mb=>$mb,
                modpending=>$al->Value(2));
    }
 }
$mb->Logout();

</%perl>


<& /comp/sidebar &>
<%perl>

my ($mb); 
my ($artist, $album, $albumid); 

if (!exists $ARGS{albumid} || $ARGS{albumid} eq '')
{
    mc_comp("/comp/badargs");
    return;
}

$albumid = $ARGS{albumid};
$mb = new MusicBrainz;
$mb->Login();

$album = Album->new($mb->{DBH});
$album->SetId($albumid);

if (! $album->LoadFromId())
{
    mc_out("This Album (ID=$albumid) was not found<br>");
}
else
{
    $artist = Artist->new($mb->{DBH});
    $artist->SetId($album->GetArtist());
    if (!defined $artist->LoadFromId())
    {
        mc_out("Could not load album.");
    }
    else
    {
        mc_comp("/comp/artisttitle", artist=>$artist);
        mc_comp("/comp/modnotice");
        mc_comp("/comp/album", album=>$album, artist=>$artist);
    }
}
$mb->Logout();

</%perl>


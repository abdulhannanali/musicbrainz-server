<%perl>

my ($mb); 
my (@info, $artistname, $albumname);
my ($trackinfo, $albumid, @idsalbums, $i, $j); 

$mb = new MusicBrainz;
$mb->Login();

$artistname = $mb->GetArtistName($ARGS{artistid});
@idsalbums = $mb->GetAlbumList($ARGS{artistid});

mc_comp("/comp/artisttitle", artistname=>$artistname, 
        artistid=>$ARGS{artistid});

for(;;)
{
    $albumid = shift @idsalbums;
    last if (! defined $albumid);
    $albumname = shift @idsalbums;

    mc_comp("/comp/album", albumid=>$albumid, 
            albumname=>$albumname, mb=>$mb);
}

$mb->Logout();

</%perl>


<%perl>

my ($mb); 
my (@info, $artistname, $albumname, $modpending);
my ($trackinfo, $albumid, @idsalbums, $i, $j, $ar, $al); 

$mb = new MusicBrainz;
$mb->Login();
$ar = Artist->new($mb);
$al = Album->new($mb);

$ar->LoadFromId($ARGS{artistid});
$artistname = $ar->Value(1);
$modpending = $ar->Value(3);

@idsalbums = $ar->GetAlbumList($ARGS{artistid});

mc_comp("/comp/artisttitle", 
        artistname=>$artistname, 
        artistid=>$ARGS{artistid},
        modpending=>$modpending);
mc_comp("/comp/modnotice");

for(;;)
{
    $albumid = shift @idsalbums;
    last if (! defined $albumid);
    $albumname = shift @idsalbums;
    $modpending = shift @idsalbums;

    mc_comp("/comp/album", 
            mb=>$mb,
            albumid=>$albumid, 
            albumname=>$albumname,
            modpending=>$modpending);
}

@idsalbums = $ar->GetMultipleArtistAlbumList($ARGS{artistid});
for(;;)
{
    $albumid = shift @idsalbums;
    last if (! defined $albumid);
    $albumname = shift @idsalbums;
    $modpending = shift @idsalbums;

    mc_comp("/comp/malbum", 
            mb=>$mb,
            albumid=>$albumid, 
            albumname=>$albumname,
            modpending=>$modpending);
}

$mb->Logout();

</%perl>

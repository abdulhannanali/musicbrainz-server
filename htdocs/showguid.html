<%perl>

my ($mb); 
my ($albumid, $trackid); 


if (!exists $ARGS{guid})
{
    mc_out("This page needs a guid argument.");
}
else
{
   mc_out("<font size=+1><b>Guid: $ARGS{guid}</b></font><p>");
   
   $mb = new MusicBrainz;
   $mb->Login();

   $trackid = $mb->GetTrackIdFromGUID($ARGS{guid});
   if ($trackid <= 0)
   {
       mc_out("<p>This GUID was not found in the main database.<p>");
   }
   else
   {
       $albumid = $mb->GetAlbumFromTrackId($trackid);
       mc_comp("comp/showalbum", 
          mb=>$mb, 
          albumid=>$albumid,
          hilitetrack=>$trackid,
          hilitecolor=>"#CCFFFF");
   }
   mc_comp("/comp/title", title=>'Pending Metadata');
   mc_comp("/comp/showpendingpage", offset=>0, guid=>$ARGS{guid});
   mc_comp("/comp/title", title=>'Pending Archive Metadata');
   mc_comp("/comp/showpendingpage", offset=>0, guid=>$ARGS{guid}, archive=>1);

   $mb->Logout;
}

</%perl>
